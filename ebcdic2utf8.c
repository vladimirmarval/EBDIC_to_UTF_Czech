// convertor01.cpp : Defines the entry point for the console application.
//

#include "stdio.h"


int main(int argc, char *argv[])
{
 FILE *fr, *fw;
 int c;
 int a[256];
 int b[256];
/*Prepocitaci tabulka*/
a[0]=0;
a[1]=1;
a[2]=2;
a[3]=3;
a[4]=0;
a[5]=9;
a[6]=0;
a[7]=127;
a[8]=0;
a[9]=0;
a[10]=0;
a[11]=11;
a[12]=12;
a[13]=13;
a[14]=14;
a[15]=15;
a[16]=16;
a[17]=17;
a[18]=18;
a[19]=19;
a[20]=0;
a[21]=0;
a[22]=8;
a[23]=0;
a[24]=24;
a[25]=25;
a[26]=0;
a[27]=0;
a[28]=28;
a[29]=29;
a[30]=30;
a[31]=31;
a[32]=0;
a[33]=0;
a[34]=0;
a[35]=0;
a[36]=0;
a[37]=10;
a[38]=23;
a[39]=27;
a[40]=0;
a[41]=0;
a[42]=0;
a[43]=0;
a[44]=0;
a[45]=5;
a[46]=6;
a[47]=7;
a[48]=0;
a[49]=0;
a[50]=22;
a[51]=0;
a[52]=0;
a[53]=0;
a[54]=0;
a[55]=4;
a[56]=0;
a[57]=0;
a[58]=0;
a[59]=0;
a[60]=20;
a[61]=21;
a[62]=0;
a[63]=26;
a[64]=32;
a[65]=32;
a[66]=195;
a[67]=195;
a[68]=197;
a[69]=195;
a[70]=196;
a[71]=196;
a[72]=195;
a[73]=196;
a[74]=91;
a[75]=46;
a[76]=60;
a[77]=40;
a[78]=43;
a[79]=33;
a[80]=38;
a[81]=195;
a[82]=196;
a[83]=195;
a[84]=197;
a[85]=195;
a[86]=195;
a[87]=196;
a[88]=195;
a[89]=195;
a[90]=93;
a[91]=36;
a[92]=42;
a[93]=41;
a[94]=59;
a[95]=94;
a[96]=45;
a[97]=47;
a[98]=195;
a[99]=195;
a[100]=203;
a[101]=195;
a[102]=196;
a[103]=196;
a[104]=195;
a[105]=196;
a[106]=124;
a[107]=44;
a[108]=37;
a[109]=95;
a[110]=62;
a[111]=63;
a[112]=203;
a[113]=195;
a[114]=196;
a[115]=195;
a[116]=197;
a[117]=195;
a[118]=195;
a[119]=196;
a[120]=196;
a[121]=96;
a[122]=58;
a[123]=35;
a[124]=64;
a[125]=39;
a[126]=61;
a[127]=34;
a[128]=203;
a[129]=97;
a[130]=98;
a[131]=99;
a[132]=100;
a[133]=101;
a[134]=102;
a[135]=103;
a[136]=104;
a[137]=105;
a[138]=197;
a[139]=197;
a[140]=196;
a[141]=195;
a[142]=197;
a[143]=197;
a[144]=194;
a[145]=106;
a[146]=107;
a[147]=108;
a[148]=109;
a[149]=110;
a[150]=111;
a[151]=112;
a[152]=113;
a[153]=114;
a[154]=197;
a[155]=197;
a[156]=197;
a[157]=194;
a[158]=203;
a[159]=194;
a[160]=196;
a[161]=191;
a[162]=115;
a[163]=116;
a[164]=117;
a[165]=118;
a[166]=119;
a[167]=120;
a[168]=121;
a[169]=122;
a[170]=197;
a[171]=197;
a[172]=195;
a[173]=195;
a[174]=197;
a[175]=197;
a[176]=203;
a[177]=196;
a[178]=197;
a[179]=197;
a[180]=197;
a[181]=194;
a[182]=197;
a[183]=197;
a[184]=197;
a[185]=197;
a[186]=197;
a[187]=197;
a[188]=197;
a[189]=194;
a[190]=194;
a[191]=195;
a[192]=123;
a[193]=65;
a[194]=66;
a[195]=67;
a[196]=68;
a[197]=69;
a[198]=70;
a[199]=71;
a[200]=72;
a[201]=73;
a[202]=32;
a[203]=195;
a[204]=195;
a[205]=197;
a[206]=195;
a[207]=197;
a[208]=125;
a[209]=74;
a[210]=75;
a[211]=76;
a[212]=77;
a[213]=78;
a[214]=79;
a[215]=80;
a[216]=81;
a[217]=82;
a[218]=196;
a[219]=197;
a[220]=195;
a[221]=197;
a[222]=195;
a[223]=196;
a[224]=92;
a[225]=195;
a[226]=83;
a[227]=84;
a[228]=85;
a[229]=86;
a[230]=87;
a[231]=88;
a[232]=89;
a[233]=90;
a[234]=196;
a[235]=195;
a[236]=195;
a[237]=197;
a[238]=195;
a[239]=197;
a[240]=48;
a[241]=49;
a[242]=50;
a[243]=51;
a[244]=52;
a[245]=53;
a[246]=54;
a[247]=55;
a[248]=56;
a[249]=57;
a[250]=196;
a[251]=197;
a[252]=195;
a[253]=197;
a[254]=195;
a[255]=0;

/*druhy bajt*/
b[0]=263;
b[1]=263;
b[2]=263;
b[3]=263;
b[4]=263;
b[5]=263;
b[6]=263;
b[7]=263;
b[8]=263;
b[9]=263;
b[10]=263;
b[11]=263;
b[12]=263;
b[13]=263;
b[14]=263;
b[15]=263;
b[16]=263;
b[17]=263;
b[18]=263;
b[19]=263;
b[20]=263;
b[21]=263;
b[22]=263;
b[23]=263;
b[24]=263;
b[25]=263;
b[26]=263;
b[27]=263;
b[28]=263;
b[29]=263;
b[30]=263;
b[31]=263;
b[32]=263;
b[33]=263;
b[34]=263;
b[35]=263;
b[36]=263;
b[37]=263;
b[38]=263;
b[39]=263;
b[40]=263;
b[41]=263;
b[42]=263;
b[43]=263;
b[44]=263;
b[45]=263;
b[46]=263;
b[47]=263;
b[48]=263;
b[49]=263;
b[50]=263;
b[51]=263;
b[52]=263;
b[53]=263;
b[54]=263;
b[55]=263;
b[56]=263;
b[57]=263;
b[58]=263;
b[59]=263;
b[60]=263;
b[61]=263;
b[62]=263;
b[63]=263;
b[64]=263;
b[65]=0;
b[66]=162;
b[67]=164;
b[68]=163;
b[69]=161;
b[70]=131;
b[71]=141;
b[72]=167;
b[73]=135;
b[74]=263;
b[75]=263;
b[76]=263;
b[77]=263;
b[78]=263;
b[79]=263;
b[80]=263;
b[81]=169;
b[82]=153;
b[83]=171;
b[84]=175;
b[85]=173;
b[86]=174;
b[87]=190;
b[88]=141;
b[89]=159;
b[90]=263;
b[91]=263;
b[92]=263;
b[93]=263;
b[94]=263;
b[95]=263;
b[96]=263;
b[97]=263;
b[98]=130;
b[99]=132;
b[100]=157;
b[101]=129;
b[102]=130;
b[103]=140;
b[104]=135;
b[105]=134;
b[106]=263;
b[107]=263;
b[108]=263;
b[109]=263;
b[110]=263;
b[111]=263;
b[112]=135;
b[113]=137;
b[114]=152;
b[115]=139;
b[116]=174;
b[117]=141;
b[118]=142;
b[119]=189;
b[120]=185;
b[121]=263;
b[122]=263;
b[123]=263;
b[124]=263;
b[125]=263;
b[126]=263;
b[127]=263;
b[128]=152;
b[129]=263;
b[130]=263;
b[131]=263;
b[132]=263;
b[133]=263;
b[134]=263;
b[135]=263;
b[136]=263;
b[137]=263;
b[138]=155;
b[139]=136;
b[140]=145;
b[141]=189;
b[142]=153;
b[143]=159;
b[144]=176;
b[145]=263;
b[146]=263;
b[147]=263;
b[148]=263;
b[149]=263;
b[150]=263;
b[151]=263;
b[152]=263;
b[153]=263;
b[154]=130;
b[155]=132;
b[156]=161;
b[157]=184;
b[158]=155;
b[159]=164;
b[160]=133;
b[161]=126;
b[162]=263;
b[163]=263;
b[164]=263;
b[165]=263;
b[166]=263;
b[167]=263;
b[168]=263;
b[169]=263;
b[170]=154;
b[171]=135;
b[172]=144;
b[173]=157;
b[174]=152;
b[175]=158;
b[176]=153;
b[177]=132;
b[178]=188;
b[179]=162;
b[180]=187;
b[181]=167;
b[182]=190;
b[183]=186;
b[184]=189;
b[185]=185;
b[186]=129;
b[187]=131;
b[188]=160;
b[189]=168;
b[190]=180;
b[191]=151;
b[192]=263;
b[193]=263;
b[194]=263;
b[195]=263;
b[196]=263;
b[197]=263;
b[198]=263;
b[199]=263;
b[200]=263;
b[201]=263;
b[202]=263;
b[203]=180;
b[204]=182;
b[205]=149;
b[206]=179;
b[207]=145;
b[208]=263;
b[209]=263;
b[210]=263;
b[211]=263;
b[212]=263;
b[213]=263;
b[214]=263;
b[215]=263;
b[216]=263;
b[217]=263;
b[218]=154;
b[219]=177;
b[220]=188;
b[221]=165;
b[222]=186;
b[223]=155;
b[224]=263;
b[225]=183;
b[226]=263;
b[227]=263;
b[228]=263;
b[229]=263;
b[230]=263;
b[231]=263;
b[232]=263;
b[233]=263;
b[234]=143;
b[235]=148;
b[236]=150;
b[237]=148;
b[238]=147;
b[239]=144;
b[240]=263;
b[241]=263;
b[242]=263;
b[243]=263;
b[244]=263;
b[245]=263;
b[246]=263;
b[247]=263;
b[248]=263;
b[249]=263;
b[250]=142;
b[251]=176;
b[252]=156;
b[253]=164;
b[254]=154;
b[255]=263;

/*konec prepocitaci tabulky*/
printf("(C)Copyright 2009 Vladimir Marval - EBCDIC to UTF-8 convertor ver. 2.1: ebcdic2utf8 <input file name> <output filename> \n");
if (argc==3){
 fr=fopen(argv[1],"rb");
 fw=fopen(argv[2],"wb");
   
 while ((c=getc(fr)) != EOF )
 {
  /*putchar(a[c]);*/
  putc(a[c],fw);
  /*koduje dvoubajtove znaky */
  if (b[c]!=263){
  putc(b[c],fw);
  }
 }
 fclose(fr);
 fclose(fw);
}
else{
 printf("error: incorrect number of arguments\n");
}

 return 0;
}